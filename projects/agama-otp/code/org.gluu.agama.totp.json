{
	"nodes": [
		{
			"width": 170,
			"height": 124,
			"id": "Agama-log-Node-16203684-77dd-42fe-9f40-783cb4047118",
			"position": {
				"x": 2038,
				"y": 401
			},
			"type": "log",
			"data": {
				"id": "Agama-log-Node-16203684-77dd-42fe-9f40-783cb4047118",
				"type": "Agama-log-Node",
				"parentId": "Agama-trigger-Node-8c3bb0a9-9b1f-4b34-9039-dd6e3463545d",
				"whenCondition": "",
				"inRepeatBlock": false,
				"position": {
					"x": 2038,
					"y": 401
				},
				"agamaData": {
					"id": "Agama-log-Node-16203684-77dd-42fe-9f40-783cb4047118",
					"parentId": "Agama-trigger-Node-8c3bb0a9-9b1f-4b34-9039-dd6e3463545d",
					"type": "Agama-log-Node",
					"displayName": "log enrollData",
					"hasComment": true,
					"comment": "",
					"whenCondition": "",
					"inRepeatBlock": false,
					"logMessage": "\"enroll \" enrollData E",
					"logLevel": "info",
					"nodeIcon": "octicon:log-16"
				}
			},
			"selected": true,
			"dragging": false,
			"positionAbsolute": {
				"x": 2038,
				"y": 401
			}
		},
		{
			"width": 170,
			"height": 124,
			"id": "Agama-trigger-Node-8c3bb0a9-9b1f-4b34-9039-dd6e3463545d",
			"position": {
				"x": 1838,
				"y": 401
			},
			"type": "trigger",
			"data": {
				"id": "Agama-trigger-Node-8c3bb0a9-9b1f-4b34-9039-dd6e3463545d",
				"type": "Agama-trigger-Node",
				"parentId": "Agama-when-Node-4fa47f26-e1e3-4d4f-b40d-31de2ff74da4",
				"whenCondition": "WhenTrue",
				"inRepeatBlock": false,
				"position": {
					"x": 1838,
					"y": 401
				},
				"agamaData": {
					"id": "Agama-trigger-Node-8c3bb0a9-9b1f-4b34-9039-dd6e3463545d",
					"parentId": "Agama-when-Node-4fa47f26-e1e3-4d4f-b40d-31de2ff74da4",
					"type": "Agama-trigger-Node",
					"displayName": "enroll user",
					"hasComment": true,
					"comment": "",
					"whenCondition": "WhenTrue",
					"inRepeatBlock": false,
					"nodeIcon": "fluent-mdl2:trigger-approval",
					"flowFileName": "org.gluu.agama.otp.enroll",
					"arguments": [
						"userId"
					],
					"asssignedVariableName": "enrollData",
					"exceptionVariableField": "E"
				}
			},
			"selected": false,
			"dragging": false,
			"positionAbsolute": {
				"x": 1838,
				"y": 401
			}
		},
		{
			"width": 210,
			"height": 140,
			"id": "Agama-when-Node-4fa47f26-e1e3-4d4f-b40d-31de2ff74da4",
			"position": {
				"x": 1725,
				"y": 171
			},
			"parentId": "Agama-log-Node-9e877173-94de-48c1-a807-cde1025de181",
			"type": "when",
			"data": {
				"id": "Agama-when-Node-4fa47f26-e1e3-4d4f-b40d-31de2ff74da4",
				"type": "Agama-when-Node",
				"parentId": "Agama-log-Node-9e877173-94de-48c1-a807-cde1025de181",
				"whenCondition": "",
				"inRepeatBlock": false,
				"position": {
					"x": 1725,
					"y": 171
				},
				"agamaData": {
					"id": "Agama-when-Node-4fa47f26-e1e3-4d4f-b40d-31de2ff74da4",
					"parentId": "Agama-log-Node-9e877173-94de-48c1-a807-cde1025de181",
					"type": "Agama-when-Node",
					"variableField": "userTOTPSecretKey",
					"conditionInputField": "is",
					"valueField": "null",
					"comment": "if no enrollment exist",
					"hasComment": true,
					"inRepeatBlock": false
				},
				"handles": [
					"Agama-when-Node-4fa47f26-e1e3-4d4f-b40d-31de2ff74da4.FAILURE",
					"Agama-when-Node-4fa47f26-e1e3-4d4f-b40d-31de2ff74da4.SUCCESS"
				]
			},
			"selected": false,
			"dragging": false,
			"positionAbsolute": {
				"x": 1725,
				"y": 171
			}
		},
		{
			"width": 170,
			"height": 124,
			"id": "Agama-log-Node-2b76cda3-0e65-41ad-936b-0c9b32cf705c",
			"position": {
				"x": 1072,
				"y": 120
			},
			"type": "log",
			"data": {
				"id": "Agama-log-Node-2b76cda3-0e65-41ad-936b-0c9b32cf705c",
				"type": "Agama-log-Node",
				"parentId": "Agama-assignment-Node-991ae6f6-437f-45ef-927e-51659e977511",
				"whenCondition": "",
				"inRepeatBlock": false,
				"position": {
					"x": 1072,
					"y": 120
				},
				"agamaData": {
					"id": "Agama-log-Node-2b76cda3-0e65-41ad-936b-0c9b32cf705c",
					"parentId": "Agama-assignment-Node-991ae6f6-437f-45ef-927e-51659e977511",
					"type": "Agama-log-Node",
					"displayName": "userId log",
					"hasComment": true,
					"comment": "",
					"whenCondition": "",
					"inRepeatBlock": false,
					"logMessage": "\"user id \" userId",
					"logLevel": "info",
					"nodeIcon": "octicon:log-16"
				},
				"skake": false
			},
			"selected": false,
			"dragging": false,
			"positionAbsolute": {
				"x": 1072,
				"y": 120
			}
		},
		{
			"width": 170,
			"height": 124,
			"id": "Agama-assignment-Node-991ae6f6-437f-45ef-927e-51659e977511",
			"position": {
				"x": 872,
				"y": 120
			},
			"type": "assignment",
			"data": {
				"id": "Agama-assignment-Node-991ae6f6-437f-45ef-927e-51659e977511",
				"type": "Agama-assignment-Node",
				"parentId": "Agama-log-Node-9d24eef3-4e4c-4647-a215-407f7fb0b575",
				"whenCondition": "",
				"inRepeatBlock": false,
				"position": {
					"x": 872,
					"y": 120
				},
				"agamaData": {
					"id": "Agama-assignment-Node-991ae6f6-437f-45ef-927e-51659e977511",
					"parentId": "Agama-log-Node-9d24eef3-4e4c-4647-a215-407f7fb0b575",
					"type": "Agama-assignment-Node",
					"displayName": "userId",
					"hasComment": true,
					"comment": "",
					"whenCondition": "",
					"inRepeatBlock": false,
					"assignments": [
						{
							"variableTypeCheck": false,
							"assignmentExpression": "user.data.userId",
							"assignedVariableName": "userId"
						}
					],
					"nodeIcon": "material-symbols:equal"
				},
				"skake": false
			},
			"selected": false,
			"dragging": false,
			"positionAbsolute": {
				"x": 872,
				"y": 120
			}
		},
		{
			"width": 170,
			"height": 124,
			"id": "Agama-log-Node-9d24eef3-4e4c-4647-a215-407f7fb0b575",
			"position": {
				"x": 672,
				"y": 120
			},
			"type": "log",
			"data": {
				"id": "Agama-log-Node-9d24eef3-4e4c-4647-a215-407f7fb0b575",
				"type": "Agama-log-Node",
				"parentId": "Agama-trigger-Node-e55136b1-e061-4ca6-9a25-05afeb5e2d8b",
				"whenCondition": "",
				"inRepeatBlock": false,
				"position": {
					"x": 672,
					"y": 120
				},
				"agamaData": {
					"id": "Agama-log-Node-9d24eef3-4e4c-4647-a215-407f7fb0b575",
					"parentId": "Agama-trigger-Node-e55136b1-e061-4ca6-9a25-05afeb5e2d8b",
					"type": "Agama-log-Node",
					"displayName": "log user",
					"hasComment": true,
					"comment": "",
					"whenCondition": "",
					"inRepeatBlock": false,
					"logMessage": "\"user details \" user",
					"logLevel": "info",
					"nodeIcon": "octicon:log-16"
				},
				"skake": false
			},
			"selected": false,
			"dragging": false,
			"positionAbsolute": {
				"x": 672,
				"y": 120
			}
		},
		{
			"width": 170,
			"height": 124,
			"id": "Agama-trigger-Node-e55136b1-e061-4ca6-9a25-05afeb5e2d8b",
			"position": {
				"x": 472,
				"y": 120
			},
			"type": "trigger",
			"data": {
				"id": "Agama-trigger-Node-e55136b1-e061-4ca6-9a25-05afeb5e2d8b",
				"type": "Agama-trigger-Node",
				"parentId": "Agama-log-Node-cb7fc7cb-a84c-4c28-aea3-e9d7bbf1683a",
				"whenCondition": "",
				"inRepeatBlock": false,
				"position": {
					"x": 472,
					"y": 120
				},
				"agamaData": {
					"id": "Agama-trigger-Node-e55136b1-e061-4ca6-9a25-05afeb5e2d8b",
					"parentId": "Agama-log-Node-cb7fc7cb-a84c-4c28-aea3-e9d7bbf1683a",
					"type": "Agama-trigger-Node",
					"displayName": "Trigger User Authn PW",
					"hasComment": true,
					"comment": "Username password login",
					"whenCondition": "",
					"inRepeatBlock": false,
					"nodeIcon": "fluent-mdl2:trigger-approval",
					"flowFileName": "org.gluu.agama.pw",
					"arguments": [],
					"asssignedVariableName": "user",
					"exceptionVariableField": "E"
				},
				"skake": false
			},
			"selected": false,
			"dragging": false,
			"positionAbsolute": {
				"x": 472,
				"y": 120
			}
		},
		{
			"width": 170,
			"height": 124,
			"id": "Agama-log-Node-cb7fc7cb-a84c-4c28-aea3-e9d7bbf1683a",
			"position": {
				"x": 272,
				"y": 120
			},
			"type": "log",
			"data": {
				"id": "Agama-log-Node-cb7fc7cb-a84c-4c28-aea3-e9d7bbf1683a",
				"type": "Agama-log-Node",
				"parentId": "Agama-start-Flow-5e5f716c-d68a-48fe-9ab3-ce1d4292176e",
				"whenCondition": "",
				"inRepeatBlock": false,
				"position": {
					"x": 272,
					"y": 120
				},
				"agamaData": {
					"id": "Agama-log-Node-cb7fc7cb-a84c-4c28-aea3-e9d7bbf1683a",
					"parentId": "Agama-start-Flow-5e5f716c-d68a-48fe-9ab3-ce1d4292176e",
					"type": "Agama-log-Node",
					"displayName": "",
					"hasComment": true,
					"comment": "user authn",
					"whenCondition": "",
					"inRepeatBlock": false,
					"logMessage": "\"user authn\"",
					"logLevel": "info",
					"nodeIcon": "octicon:log-16"
				},
				"skake": false
			},
			"selected": false,
			"dragging": false,
			"positionAbsolute": {
				"x": 272,
				"y": 120
			}
		},
		{
			"width": 170,
			"height": 124,
			"id": "Agama-start-Flow-5e5f716c-d68a-48fe-9ab3-ce1d4292176e",
			"type": "start",
			"sourcePosition": "right",
			"data": {
				"id": "Agama-start-Flow-5e5f716c-d68a-48fe-9ab3-ce1d4292176e",
				"type": "Agama-start-Flow",
				"position": {
					"x": 72,
					"y": 120
				},
				"inRepeatBlock": false,
				"agamaData": {
					"id": "Agama-start-Flow-5e5f716c-d68a-48fe-9ab3-ce1d4292176e",
					"type": "Agama-start-Flow",
					"displayName": "gluu agama totp",
					"hasComment": true,
					"comment": "",
					"isTopLevelFlow": true,
					"basepath": "",
					"configParams": "{}",
					"nodeIcon": "material-symbols:line-start-square",
					"timeout": "",
					"inputs": "",
					"configs": "",
					"flowname": "org.gluu.agama.totp"
				},
				"skake": false
			},
			"position": {
				"x": 72,
				"y": 120
			},
			"selected": false,
			"positionAbsolute": {
				"x": 72,
				"y": 120
			},
			"dragging": false
		},
		{
			"width": 170,
			"height": 124,
			"id": "Agama-call-Node-c9f0bffa-db46-4080-8661-c51de76a3ef5",
			"position": {
				"x": 1298,
				"y": 120
			},
			"type": "call",
			"data": {
				"id": "Agama-call-Node-c9f0bffa-db46-4080-8661-c51de76a3ef5",
				"type": "Agama-call-Node",
				"parentId": "Agama-log-Node-2b76cda3-0e65-41ad-936b-0c9b32cf705c",
				"whenCondition": "",
				"inRepeatBlock": false,
				"position": {
					"x": 1298,
					"y": 120
				},
				"agamaData": {
					"id": "Agama-call-Node-c9f0bffa-db46-4080-8661-c51de76a3ef5",
					"parentId": "Agama-log-Node-2b76cda3-0e65-41ad-936b-0c9b32cf705c",
					"type": "Agama-call-Node",
					"displayName": "Get User TOTP Secret key",
					"hasComment": true,
					"comment": "",
					"javaClassName": "org.gluu.agama.totp.IdentityProcessor",
					"javaMethodName": "getUserTOTPSecretKey",
					"javaVariableName": "",
					"exceptionVariableField": "E",
					"callType": "Call static method",
					"whenCondition": "",
					"inRepeatBlock": false,
					"arguments": [
						"userId"
					],
					"nodeIcon": "material-symbols:code",
					"asssignedVariableName": "userTOTPSecretKey"
				},
				"skake": false
			},
			"selected": false,
			"positionAbsolute": {
				"x": 1298,
				"y": 120
			},
			"dragging": false
		},
		{
			"width": 170,
			"height": 124,
			"id": "Agama-log-Node-9e877173-94de-48c1-a807-cde1025de181",
			"position": {
				"x": 1525,
				"y": 117
			},
			"type": "log",
			"data": {
				"id": "Agama-log-Node-9e877173-94de-48c1-a807-cde1025de181",
				"type": "Agama-log-Node",
				"parentId": "Agama-call-Node-c9f0bffa-db46-4080-8661-c51de76a3ef5",
				"whenCondition": "",
				"inRepeatBlock": false,
				"position": {
					"x": 1525,
					"y": 117
				},
				"agamaData": {
					"id": "Agama-log-Node-9e877173-94de-48c1-a807-cde1025de181",
					"parentId": "Agama-call-Node-c9f0bffa-db46-4080-8661-c51de76a3ef5",
					"type": "Agama-log-Node",
					"displayName": "log user TOTP secret key",
					"hasComment": true,
					"comment": "",
					"whenCondition": "",
					"inRepeatBlock": false,
					"logMessage": "\"user TOTP secret key from flow \" userTOTPSecretKey",
					"logLevel": "info",
					"nodeIcon": "octicon:log-16",
					"hasSuccess": "",
					"hasFailure": "",
					"hasNoRepeat": false,
					"hasRepeat": false
				},
				"skake": false
			},
			"selected": false,
			"positionAbsolute": {
				"x": 1525,
				"y": 117
			},
			"dragging": false
		}
	],
	"edges": [
		{
			"id": "Agama-start-Flow-5e5f716c-d68a-48fe-9ab3-ce1d4292176e-Agama-log-Node-cb7fc7cb-a84c-4c28-aea3-e9d7bbf1683a-268e49ad-90e8-43df-8170-a036e93bdde6",
			"type": "straight",
			"source": "Agama-start-Flow-5e5f716c-d68a-48fe-9ab3-ce1d4292176e",
			"target": "Agama-log-Node-cb7fc7cb-a84c-4c28-aea3-e9d7bbf1683a",
			"label": "",
			"labelBgPadding": [
				8,
				4
			],
			"labelBgBorderRadius": 4,
			"labelBgStyle": {
				"fill": "#FFCC00",
				"color": "#fff",
				"fillOpacity": 0.7
			}
		},
		{
			"id": "Agama-log-Node-cb7fc7cb-a84c-4c28-aea3-e9d7bbf1683a-Agama-trigger-Node-e55136b1-e061-4ca6-9a25-05afeb5e2d8b-40284e17-518c-4a8e-850f-9a2528d70c19",
			"type": "straight",
			"source": "Agama-log-Node-cb7fc7cb-a84c-4c28-aea3-e9d7bbf1683a",
			"target": "Agama-trigger-Node-e55136b1-e061-4ca6-9a25-05afeb5e2d8b",
			"label": "",
			"labelBgPadding": [
				8,
				4
			],
			"labelBgBorderRadius": 4,
			"labelBgStyle": {
				"fill": "#FFCC00",
				"color": "#fff",
				"fillOpacity": 0.7
			}
		},
		{
			"id": "Agama-trigger-Node-e55136b1-e061-4ca6-9a25-05afeb5e2d8b-Agama-log-Node-9d24eef3-4e4c-4647-a215-407f7fb0b575-9faceb8c-8b66-4610-9ef9-a7b9afe9f8bd",
			"type": "straight",
			"source": "Agama-trigger-Node-e55136b1-e061-4ca6-9a25-05afeb5e2d8b",
			"target": "Agama-log-Node-9d24eef3-4e4c-4647-a215-407f7fb0b575",
			"label": "",
			"labelBgPadding": [
				8,
				4
			],
			"labelBgBorderRadius": 4,
			"labelBgStyle": {
				"fill": "#FFCC00",
				"color": "#fff",
				"fillOpacity": 0.7
			}
		},
		{
			"id": "Agama-log-Node-9d24eef3-4e4c-4647-a215-407f7fb0b575-Agama-assignment-Node-991ae6f6-437f-45ef-927e-51659e977511-8fba0726-bde4-489f-a4e7-91b8b29a756c",
			"type": "straight",
			"source": "Agama-log-Node-9d24eef3-4e4c-4647-a215-407f7fb0b575",
			"target": "Agama-assignment-Node-991ae6f6-437f-45ef-927e-51659e977511",
			"label": "",
			"labelBgPadding": [
				8,
				4
			],
			"labelBgBorderRadius": 4,
			"labelBgStyle": {
				"fill": "#FFCC00",
				"color": "#fff",
				"fillOpacity": 0.7
			}
		},
		{
			"id": "Agama-assignment-Node-991ae6f6-437f-45ef-927e-51659e977511-Agama-log-Node-2b76cda3-0e65-41ad-936b-0c9b32cf705c-eb9777ac-724c-4875-96ee-190c3c6268d7",
			"type": "straight",
			"source": "Agama-assignment-Node-991ae6f6-437f-45ef-927e-51659e977511",
			"target": "Agama-log-Node-2b76cda3-0e65-41ad-936b-0c9b32cf705c",
			"label": "",
			"labelBgPadding": [
				8,
				4
			],
			"labelBgBorderRadius": 4,
			"labelBgStyle": {
				"fill": "#FFCC00",
				"color": "#fff",
				"fillOpacity": 0.7
			}
		},
		{
			"id": "Agama-log-Node-2b76cda3-0e65-41ad-936b-0c9b32cf705c-Agama-call-Node-c9f0bffa-db46-4080-8661-c51de76a3ef5-be2b7fb6-c92c-427d-9972-ac2d2177d617",
			"type": "straight",
			"source": "Agama-log-Node-2b76cda3-0e65-41ad-936b-0c9b32cf705c",
			"target": "Agama-call-Node-c9f0bffa-db46-4080-8661-c51de76a3ef5",
			"label": "",
			"labelBgPadding": [
				8,
				4
			],
			"labelBgBorderRadius": 4,
			"labelBgStyle": {
				"fill": "#FFCC00",
				"color": "#fff",
				"fillOpacity": 0.7
			}
		},
		{
			"id": "Agama-call-Node-c9f0bffa-db46-4080-8661-c51de76a3ef5-Agama-log-Node-9e877173-94de-48c1-a807-cde1025de181-fa5bc755-0472-47a9-82a5-b8bf55dcc05d",
			"type": "straight",
			"source": "Agama-call-Node-c9f0bffa-db46-4080-8661-c51de76a3ef5",
			"target": "Agama-log-Node-9e877173-94de-48c1-a807-cde1025de181",
			"label": "",
			"labelBgPadding": [
				8,
				4
			],
			"labelBgBorderRadius": 4,
			"labelBgStyle": {
				"fill": "#FFCC00",
				"color": "#fff",
				"fillOpacity": 0.7
			}
		},
		{
			"id": "Agama-log-Node-9e877173-94de-48c1-a807-cde1025de181-Agama-trigger-Node-93ce58c0-ce85-4313-934b-4ba186ab3424-63c6f577-c8d7-40be-9383-b0eefe80e1e7",
			"type": "straight",
			"source": "Agama-log-Node-9e877173-94de-48c1-a807-cde1025de181",
			"target": "Agama-trigger-Node-93ce58c0-ce85-4313-934b-4ba186ab3424",
			"label": "",
			"labelBgPadding": [
				8,
				4
			],
			"labelBgBorderRadius": 4,
			"labelBgStyle": {
				"fill": "#FFCC00",
				"color": "#fff",
				"fillOpacity": 0.7
			}
		},
		{
			"id": "Agama-log-Node-9e877173-94de-48c1-a807-cde1025de181-Agama-when-Node-4fa47f26-e1e3-4d4f-b40d-31de2ff74da4-e123923c-6a81-4b4d-8003-f93384eca337",
			"type": "straight",
			"source": "Agama-log-Node-9e877173-94de-48c1-a807-cde1025de181",
			"target": "Agama-when-Node-4fa47f26-e1e3-4d4f-b40d-31de2ff74da4",
			"label": "",
			"labelBgPadding": [
				8,
				4
			],
			"labelBgBorderRadius": 4,
			"labelBgStyle": {
				"fill": "#FFCC00",
				"color": "#fff",
				"fillOpacity": 0.7
			}
		},
		{
			"id": "Agama-when-Node-4fa47f26-e1e3-4d4f-b40d-31de2ff74da4-Agama-trigger-Node-8c3bb0a9-9b1f-4b34-9039-dd6e3463545d-a524dd71-c69a-4e9d-bf6d-654b0bfc1126",
			"type": "straight",
			"source": "Agama-when-Node-4fa47f26-e1e3-4d4f-b40d-31de2ff74da4",
			"target": "Agama-trigger-Node-8c3bb0a9-9b1f-4b34-9039-dd6e3463545d",
			"label": "Condition met",
			"labelBgPadding": [
				8,
				4
			],
			"labelBgBorderRadius": 4,
			"labelBgStyle": {
				"fill": "#FFCC00",
				"color": "#fff",
				"fillOpacity": 0.7
			},
			"sourceHandle": "Agama-when-Node-4fa47f26-e1e3-4d4f-b40d-31de2ff74da4.SUCCESS"
		},
		{
			"id": "Agama-trigger-Node-8c3bb0a9-9b1f-4b34-9039-dd6e3463545d-Agama-log-Node-16203684-77dd-42fe-9f40-783cb4047118-d1ef50cc-ec39-443b-9cee-05afec9452eb",
			"type": "straight",
			"source": "Agama-trigger-Node-8c3bb0a9-9b1f-4b34-9039-dd6e3463545d",
			"target": "Agama-log-Node-16203684-77dd-42fe-9f40-783cb4047118",
			"label": "",
			"labelBgPadding": [
				8,
				4
			],
			"labelBgBorderRadius": 4,
			"labelBgStyle": {
				"fill": "#FFCC00",
				"color": "#fff",
				"fillOpacity": 0.7
			}
		}
	],
	"viewport": {
		"x": -994,
		"y": 32,
		"zoom": 1
	}
}